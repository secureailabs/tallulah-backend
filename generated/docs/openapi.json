{"openapi":"3.1.0","info":{"title":"Tallulah","description":"All the private and public APIs for Tallulah - Patient Story Management Platform","version":"0.1.0"},"paths":{"/login":{"post":{"summary":"Login For Access Token","description":"User login with email and password","operationId":"login","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginSuccess_Out"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}},"401":{"description":"Incorrect username or password","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPException"}}}}}}},"/refresh-token":{"post":{"summary":"Refresh For Access Token","description":"Refresh the JWT token for the user","operationId":"get_refresh_token","requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/RefreshToken_In"}],"title":"Refresh Token Request","description":"Refresh token request"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginSuccess_Out"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}},"401":{"description":"Could not validate credentials.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPException"}}}}}}},"/me":{"get":{"summary":"Get Current User Info","description":"Get the current user information","operationId":"get_current_user_info","responses":{"200":{"description":"The current user information","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInfo_Out"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/unlock-account/{user_id}":{"put":{"summary":"Unlock User Account","description":"Unlock the user account","operationId":"unlock_user_account","parameters":[{"description":"The user id to unlock the account for","required":true,"schema":{"type":"string","format":"uuid","title":"User Id","description":"The user id to unlock the account for"},"name":"user_id","in":"path"}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/":{"post":{"tags":["users"],"summary":"Register User","description":"Add new user to organization","operationId":"register_user","requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/RegisterUser_In"}],"title":"User","description":"User details to register with the organization"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterUser_Out"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}},"409":{"description":"User already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPException"}}}},"403":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPException"}}}}}}},"/users/{user_id}":{"get":{"tags":["users"],"summary":"Get User","description":"Get information about a user","operationId":"get_user","parameters":[{"description":"UUID of the user","required":true,"schema":{"type":"string","format":"uuid","title":"User Id","description":"UUID of the user"},"name":"user_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetUsers_Out"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"delete":{"tags":["users"],"summary":"Soft Delete User","description":"Soft Delete user","operationId":"soft_delete_user","parameters":[{"description":"UUID of the user","required":true,"schema":{"type":"string","format":"uuid","title":"User Id","description":"UUID of the user"},"name":"user_id","in":"path"}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}},"403":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPException"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"patch":{"tags":["users"],"summary":"Update User Info","description":"Update user information.","operationId":"update_user_info","parameters":[{"description":"UUID of the user","required":true,"schema":{"type":"string","format":"uuid","title":"User Id","description":"UUID of the user"},"name":"user_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/UpdateUser_In"}],"title":"Update User Info","description":"User information to update"}}},"required":true},"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}},"403":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPException"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/database":{"delete":{"tags":["internal"],"summary":"Drop Database","description":"Drop the database","operationId":"drop_database","responses":{"204":{"description":"Successful Response"}},"security":[{"OAuth2PasswordBearer":[]}]}},"/":{"get":{"tags":["internal"],"summary":"Read Root","operationId":"read_root__get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/mailbox/":{"get":{"tags":["mailbox"],"summary":"Get All Mailboxes","description":"Get all the mailboxes for the current user","operationId":"get_all_mailboxes","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetMultipleMailboxes_Out"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["mailbox"],"summary":"Add New Mailbox","description":"Add a new mailbox by code","operationId":"add_new_mailbox","requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/RegisterMailbox_In"}],"title":"Mailbox Info","description":"Oauth code that is used to fetch the token from the authorization server"}}},"required":true},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterMailbox_Out"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}},"400":{"description":"Invalid mailbox provider","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPException"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/mailbox/{mailbox_id}":{"get":{"tags":["mailbox"],"summary":"Get Mailbox","description":"Get the mailbox for the current user","operationId":"get_mailbox","parameters":[{"description":"Mailbox id","required":true,"schema":{"type":"string","format":"uuid","title":"Mailbox Id","description":"Mailbox id"},"name":"mailbox_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetMailbox_Out"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"delete":{"tags":["mailbox"],"summary":"Delete Mailbox","description":"Delete the mailbox and all the emails for the current user","operationId":"delete_mailbox","parameters":[{"description":"Mailbox id","required":true,"schema":{"type":"string","format":"uuid","title":"Mailbox Id","description":"Mailbox id"},"name":"mailbox_id","in":"path"}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/emails/":{"get":{"tags":["emails"],"summary":"Get All Emails","description":"Get all the emails from the mailbox","operationId":"get_all_emails","parameters":[{"description":"Mailbox id","required":true,"schema":{"type":"string","format":"uuid","title":"Mailbox Id","description":"Mailbox id"},"name":"mailbox_id","in":"query"},{"description":"Number of emails to skip","required":false,"schema":{"type":"integer","title":"Skip","description":"Number of emails to skip","default":0},"name":"skip","in":"query"},{"description":"Number of emails to return","required":false,"schema":{"type":"integer","title":"Limit","description":"Number of emails to return","default":20},"name":"limit","in":"query"},{"description":"Sort key","required":false,"schema":{"type":"string","title":"Sort Key","description":"Sort key","default":"received_time"},"name":"sort_key","in":"query"},{"description":"Sort direction","required":false,"schema":{"type":"integer","title":"Sort Direction","description":"Sort direction","default":-1},"name":"sort_direction","in":"query"},{"description":"Filter tags","required":false,"schema":{"items":{"type":"string"},"type":"array","title":"Filter Tags","description":"Filter tags"},"name":"filter_tags","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetMultipleEmail_Out"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/response-templates/":{"get":{"tags":["response-templates"],"summary":"Get All Response Templates","description":"Get all the response templates for the current user","operationId":"get_all_response_templates","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetMultipleResponseTemplate_Out"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["response-templates"],"summary":"Add New Response Template","description":"Add a new resposne template","operationId":"add_new_response_template","requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/RegisterResponseTemplate_In"}],"title":"Response Template","description":"Response template information"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterResponseTemplate_Out"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/response-templates/{response_template_id}":{"get":{"tags":["response-templates"],"summary":"Get Response Template","description":"Get the response template for the current user","operationId":"get_response_template","parameters":[{"description":"Response template id","required":true,"schema":{"type":"string","format":"uuid","title":"Response Template Id","description":"Response template id"},"name":"response_template_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetResponseTemplate_Out"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"delete":{"tags":["response-templates"],"summary":"Delete Response Template","description":"Delete the response template for the current user","operationId":"delete_response_template","parameters":[{"description":"Response template id","required":true,"schema":{"type":"string","format":"uuid","title":"Response Template Id","description":"Response template id"},"name":"response_template_id","in":"path"}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"patch":{"tags":["response-templates"],"summary":"Update Response Template","description":"Update the response template for the current user","operationId":"update_response_template","parameters":[{"description":"Response template id","required":true,"schema":{"type":"string","format":"uuid","title":"Response Template Id","description":"Response template id"},"name":"response_template_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/UpdateResponseTemplate_In"}],"title":"Response Template","description":"Response template information"}}},"required":true},"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}}},"components":{"schemas":{"Annotation":{"properties":{"annotation_id":{"type":"string","format":"uuid","title":"Annotation Id"},"source":{"type":"string","title":"Source"},"label":{"type":"string","title":"Label"},"label_scores":{"additionalProperties":{"type":"number"},"type":"object","title":"Label Scores"}},"type":"object","required":["source","label","label_scores"],"title":"Annotation"},"Body_login":{"properties":{"grant_type":{"type":"string","pattern":"password","title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"type":"string","title":"Client Id"},"client_secret":{"type":"string","title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login"},"EmailBody":{"properties":{"contentType":{"type":"string","title":"Contenttype"},"content":{"type":"string","title":"Content"}},"type":"object","required":["contentType","content"],"title":"EmailBody"},"EmailState":{"enum":["UNPROCESSED","PROCESSED","FAILED"],"title":"EmailState","description":"An enumeration."},"GetEmail_Out":{"properties":{"subject":{"type":"string","title":"Subject"},"body":{"type":"object","title":"Body"},"from_address":{"type":"object","title":"From Address"},"received_time":{"type":"string","title":"Received Time"},"mailbox_id":{"type":"string","format":"uuid","title":"Mailbox Id"},"annotations":{"items":{"$ref":"#/components/schemas/Annotation"},"type":"array","title":"Annotations","default":[]},"note":{"type":"string","title":"Note"},"message_state":{"allOf":[{"$ref":"#/components/schemas/EmailState"}],"default":"UNPROCESSED"},"id":{"type":"string","format":"uuid","title":" Id"},"creation_time":{"type":"string","format":"date-time","title":"Creation Time"}},"type":"object","required":["from_address","received_time","mailbox_id","id","creation_time"],"title":"GetEmail_Out"},"GetMailbox_Out":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"note":{"type":"string","title":"Note"},"user_id":{"type":"string","format":"uuid","title":"User Id"},"id":{"type":"string","format":"uuid","title":" Id"},"creation_time":{"type":"string","format":"date-time","title":"Creation Time"}},"type":"object","required":["email","user_id","id","creation_time"],"title":"GetMailbox_Out"},"GetMultipleEmail_Out":{"properties":{"messages":{"items":{"$ref":"#/components/schemas/GetEmail_Out"},"type":"array","title":"Messages"},"count":{"type":"integer","title":"Count"},"next":{"type":"integer","title":"Next"},"limit":{"type":"integer","title":"Limit"}},"type":"object","required":["messages","count","next","limit"],"title":"GetMultipleEmail_Out"},"GetMultipleMailboxes_Out":{"properties":{"mailboxes":{"items":{"$ref":"#/components/schemas/GetMailbox_Out"},"type":"array","title":"Mailboxes"}},"type":"object","required":["mailboxes"],"title":"GetMultipleMailboxes_Out"},"GetMultipleResponseTemplate_Out":{"properties":{"templates":{"items":{"$ref":"#/components/schemas/GetResponseTemplate_Out"},"type":"array","title":"Templates"}},"type":"object","required":["templates"],"title":"GetMultipleResponseTemplate_Out"},"GetResponseTemplate_Out":{"properties":{"name":{"type":"string","title":"Name"},"subject":{"type":"string","title":"Subject"},"body":{"$ref":"#/components/schemas/EmailBody"},"note":{"type":"string","title":"Note"},"id":{"type":"string","format":"uuid","title":" Id"},"creation_time":{"type":"string","format":"date-time","title":"Creation Time"},"last_edit_time":{"type":"string","format":"date-time","title":"Last Edit Time"}},"type":"object","required":["name","id"],"title":"GetResponseTemplate_Out"},"GetUsers_Out":{"properties":{"name":{"type":"string","title":"Name"},"email":{"type":"string","format":"email","title":"Email"},"job_title":{"type":"string","title":"Job Title"},"roles":{"items":{"$ref":"#/components/schemas/UserRole"},"type":"array"},"avatar":{"type":"string","title":"Avatar"},"id":{"type":"string","format":"uuid","title":" Id"}},"type":"object","required":["name","email","job_title","roles","id"],"title":"GetUsers_Out"},"HTTPValidationError":{"properties":{"error":{"type":"string","title":"Error","default":"Invalid Schema"}},"type":"object","title":"ValidationError"},"LoginSuccess_Out":{"properties":{"access_token":{"type":"string","title":"Access Token"},"refresh_token":{"type":"string","title":"Refresh Token"},"token_type":{"type":"string","title":"Token Type"}},"type":"object","required":["access_token","refresh_token","token_type"],"title":"LoginSuccess_Out"},"MailboxProvider":{"enum":["OUTLOOK","GMAIL"],"title":"MailboxProvider","description":"An enumeration."},"RefreshToken_In":{"properties":{"refresh_token":{"type":"string","title":"Refresh Token"}},"type":"object","required":["refresh_token"],"title":"RefreshToken_In"},"RegisterMailbox_In":{"properties":{"code":{"type":"string","title":"Code"},"provider":{"$ref":"#/components/schemas/MailboxProvider"}},"type":"object","required":["code","provider"],"title":"RegisterMailbox_In"},"RegisterMailbox_Out":{"properties":{"id":{"type":"string","format":"uuid","title":" Id"}},"type":"object","required":["id"],"title":"RegisterMailbox_Out"},"RegisterResponseTemplate_In":{"properties":{"name":{"type":"string","title":"Name"},"subject":{"type":"string","title":"Subject"},"body":{"$ref":"#/components/schemas/EmailBody"},"note":{"type":"string","title":"Note"}},"type":"object","required":["name"],"title":"RegisterResponseTemplate_In"},"RegisterResponseTemplate_Out":{"properties":{"id":{"type":"string","format":"uuid","title":" Id"}},"type":"object","required":["id"],"title":"RegisterResponseTemplate_Out"},"RegisterUser_In":{"properties":{"name":{"type":"string","title":"Name"},"email":{"type":"string","format":"email","title":"Email"},"job_title":{"type":"string","title":"Job Title"},"roles":{"items":{"$ref":"#/components/schemas/UserRole"},"type":"array"},"avatar":{"type":"string","title":"Avatar"},"password":{"type":"string","title":"Password"}},"type":"object","required":["name","email","job_title","roles","password"],"title":"RegisterUser_In"},"RegisterUser_Out":{"properties":{"id":{"type":"string","format":"uuid","title":" Id"}},"type":"object","required":["id"],"title":"RegisterUser_Out"},"UpdateResponseTemplate_In":{"properties":{"subject":{"type":"string","title":"Subject"},"body":{"$ref":"#/components/schemas/EmailBody"},"note":{"type":"string","title":"Note"}},"type":"object","title":"UpdateResponseTemplate_In"},"UpdateUser_In":{"properties":{"job_title":{"type":"string","title":"Job Title"},"roles":{"items":{"$ref":"#/components/schemas/UserRole"},"type":"array"},"account_state":{"$ref":"#/components/schemas/UserAccountState"},"avatar":{"type":"string","title":"Avatar"}},"type":"object","title":"UpdateUser_In"},"UserAccountState":{"enum":["ACTIVE","INACTIVE","LOCKED"],"title":"UserAccountState","description":"An enumeration."},"UserInfo_Out":{"properties":{"name":{"type":"string","title":"Name"},"email":{"type":"string","format":"email","title":"Email"},"job_title":{"type":"string","title":"Job Title"},"roles":{"items":{"$ref":"#/components/schemas/UserRole"},"type":"array"},"avatar":{"type":"string","title":"Avatar"},"id":{"type":"string","format":"uuid","title":" Id"}},"type":"object","required":["name","email","job_title","roles","id"],"title":"UserInfo_Out"},"UserRole":{"enum":["USER","TALLULAH_ADMIN"],"title":"UserRole","description":"An enumeration."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"HTTPException":{"title":"HTTPExceptionObj","type":"object","properties":{"detail":{"title":"Error Detail","type":"string"}}}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"login"}}}}}}