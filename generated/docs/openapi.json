{"openapi":"3.0.2","info":{"title":"Tallulah","description":"All the private and public APIs for Tallulah - Patient Story Management Platform","version":"0.1.0"},"paths":{"/login":{"post":{"summary":"Login For Access Token","description":"User login with email and password","operationId":"login","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginSuccess_Out"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}},"401":{"description":"Incorrect username or password","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPException"}}}}}}},"/refresh-token":{"post":{"summary":"Refresh For Access Token","description":"Refresh the JWT token for the user","operationId":"get_refresh_token","requestBody":{"content":{"application/json":{"schema":{"title":"Refresh Token Request","allOf":[{"$ref":"#/components/schemas/RefreshToken_In"}],"description":"Refresh token request"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginSuccess_Out"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}},"401":{"description":"Could not validate credentials.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPException"}}}}}}},"/me":{"get":{"summary":"Get Current User Info","description":"Get the current user information","operationId":"get_current_user_info","responses":{"200":{"description":"The current user information","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInfo_Out"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/unlock-account/{user_id}":{"put":{"summary":"Unlock User Account","description":"Unlock the user account","operationId":"unlock_user_account","parameters":[{"description":"The user id to unlock the account for","required":true,"schema":{"title":"User Id","type":"string","description":"The user id to unlock the account for","format":"uuid"},"name":"user_id","in":"path"}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/":{"post":{"tags":["users"],"summary":"Register User","description":"Add new user to organization","operationId":"register_user","requestBody":{"content":{"application/json":{"schema":{"title":"User","allOf":[{"$ref":"#/components/schemas/RegisterUser_In"}],"description":"User details to register with the organization"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterUser_Out"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}},"409":{"description":"User already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPException"}}}},"403":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPException"}}}}}}},"/users/{user_id}":{"get":{"tags":["users"],"summary":"Get User","description":"Get information about a user","operationId":"get_user","parameters":[{"description":"UUID of the user","required":true,"schema":{"title":"User Id","type":"string","description":"UUID of the user","format":"uuid"},"name":"user_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetUsers_Out"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"delete":{"tags":["users"],"summary":"Soft Delete User","description":"Soft Delete user","operationId":"soft_delete_user","parameters":[{"description":"UUID of the user","required":true,"schema":{"title":"User Id","type":"string","description":"UUID of the user","format":"uuid"},"name":"user_id","in":"path"}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}},"403":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPException"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"patch":{"tags":["users"],"summary":"Update User Info","description":"Update user information.","operationId":"update_user_info","parameters":[{"description":"UUID of the user","required":true,"schema":{"title":"User Id","type":"string","description":"UUID of the user","format":"uuid"},"name":"user_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"title":"Update User Info","allOf":[{"$ref":"#/components/schemas/UpdateUser_In"}],"description":"User information to update"}}},"required":true},"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}},"403":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPException"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/database":{"delete":{"tags":["internal"],"summary":"Drop Database","description":"Drop the database","operationId":"drop_database","responses":{"204":{"description":"Successful Response"}}}},"/":{"get":{"tags":["internal"],"summary":"Read Root","operationId":"read_root__get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/mailbox/":{"get":{"tags":["mailbox"],"summary":"Get All Mailboxes","description":"Get all the mailboxes for the current user","operationId":"get_all_mailboxes","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetMultipleMailboxes_Out"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["mailbox"],"summary":"Add New Mailbox","description":"Add a new mailbox by code","operationId":"add_new_mailbox","requestBody":{"content":{"application/json":{"schema":{"title":"Mailbox Info","allOf":[{"$ref":"#/components/schemas/RegisterMailbox_In"}],"description":"Oauth code that is used to fetch the token from the authorization server"}}},"required":true},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterMailbox_Out"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}},"400":{"description":"Invalid mailbox provider","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPException"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/mailbox/{mailbox_id}":{"get":{"tags":["mailbox"],"summary":"Get Mailbox","description":"Get the mailbox for the current user","operationId":"get_mailbox","parameters":[{"description":"Mailbox id","required":true,"schema":{"title":"Mailbox Id","type":"string","description":"Mailbox id","format":"uuid"},"name":"mailbox_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetMailbox_Out"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/emails/":{"get":{"tags":["emails"],"summary":"Get All Emails","description":"Get all the emails from the mailbox","operationId":"get_all_emails","parameters":[{"description":"Mailbox id","required":true,"schema":{"title":"Mailbox Id","type":"string","description":"Mailbox id","format":"uuid"},"name":"mailbox_id","in":"query"},{"description":"Number of emails to skip","required":false,"schema":{"title":"Skip","type":"integer","description":"Number of emails to skip","default":0},"name":"skip","in":"query"},{"description":"Number of emails to return","required":false,"schema":{"title":"Limit","type":"integer","description":"Number of emails to return","default":20},"name":"limit","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetMultipleEmail_Out"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}}},"components":{"schemas":{"Body_login":{"title":"Body_login","required":["username","password"],"type":"object","properties":{"grant_type":{"title":"Grant Type","pattern":"password","type":"string"},"username":{"title":"Username","type":"string"},"password":{"title":"Password","type":"string"},"scope":{"title":"Scope","type":"string","default":""},"client_id":{"title":"Client Id","type":"string"},"client_secret":{"title":"Client Secret","type":"string"}}},"EmailState":{"title":"EmailState","enum":["UNPROCESSED","PROCESSED","FAILED"],"description":"An enumeration."},"GetEmail_Out":{"title":"GetEmail_Out","required":["subject","body","from_address","received_time","mailbox_id","id","creation_time"],"type":"object","properties":{"subject":{"title":"Subject","type":"string"},"body":{"title":"Body","type":"object"},"from_address":{"title":"From Address","type":"object"},"received_time":{"title":"Received Time","type":"string","format":"date-time"},"mailbox_id":{"title":"Mailbox Id","type":"string","format":"uuid"},"note":{"title":"Note","type":"string"},"message_state":{"allOf":[{"$ref":"#/components/schemas/EmailState"}],"default":"UNPROCESSED"},"id":{"title":" Id","type":"string","format":"uuid"},"creation_time":{"title":"Creation Time","type":"string","format":"date-time"}}},"GetMailbox_Out":{"title":"GetMailbox_Out","required":["email","user_id","id","creation_time"],"type":"object","properties":{"email":{"title":"Email","type":"string","format":"email"},"note":{"title":"Note","type":"string"},"user_id":{"title":"User Id","type":"string","format":"uuid"},"id":{"title":" Id","type":"string","format":"uuid"},"creation_time":{"title":"Creation Time","type":"string","format":"date-time"}}},"GetMultipleEmail_Out":{"title":"GetMultipleEmail_Out","required":["messages","next","limit"],"type":"object","properties":{"messages":{"title":"Messages","type":"array","items":{"$ref":"#/components/schemas/GetEmail_Out"}},"next":{"title":"Next","type":"integer"},"limit":{"title":"Limit","type":"integer"}}},"GetMultipleMailboxes_Out":{"title":"GetMultipleMailboxes_Out","required":["mailboxes"],"type":"object","properties":{"mailboxes":{"title":"Mailboxes","type":"array","items":{"$ref":"#/components/schemas/GetMailbox_Out"}}}},"GetUsers_Out":{"title":"GetUsers_Out","required":["name","email","job_title","roles","id"],"type":"object","properties":{"name":{"title":"Name","type":"string"},"email":{"title":"Email","type":"string","format":"email"},"job_title":{"title":"Job Title","type":"string"},"roles":{"type":"array","items":{"$ref":"#/components/schemas/UserRole"}},"avatar":{"title":"Avatar","type":"string"},"id":{"title":" Id","type":"string","format":"uuid"}}},"HTTPValidationError":{"title":"ValidationError","type":"object","properties":{"error":{"title":"Error","type":"string","default":"Invalid Schema"}}},"LoginSuccess_Out":{"title":"LoginSuccess_Out","required":["access_token","refresh_token","token_type"],"type":"object","properties":{"access_token":{"title":"Access Token","type":"string"},"refresh_token":{"title":"Refresh Token","type":"string"},"token_type":{"title":"Token Type","type":"string"}}},"MailboxProvider":{"title":"MailboxProvider","enum":["OUTLOOK","GMAIL"],"description":"An enumeration."},"RefreshToken_In":{"title":"RefreshToken_In","required":["refresh_token"],"type":"object","properties":{"refresh_token":{"title":"Refresh Token","type":"string"}}},"RegisterMailbox_In":{"title":"RegisterMailbox_In","required":["code","provider"],"type":"object","properties":{"code":{"title":"Code","type":"string"},"provider":{"$ref":"#/components/schemas/MailboxProvider"}}},"RegisterMailbox_Out":{"title":"RegisterMailbox_Out","required":["id"],"type":"object","properties":{"id":{"title":" Id","type":"string","format":"uuid"}}},"RegisterUser_In":{"title":"RegisterUser_In","required":["name","email","job_title","roles","password"],"type":"object","properties":{"name":{"title":"Name","type":"string"},"email":{"title":"Email","type":"string","format":"email"},"job_title":{"title":"Job Title","type":"string"},"roles":{"type":"array","items":{"$ref":"#/components/schemas/UserRole"}},"avatar":{"title":"Avatar","type":"string"},"password":{"title":"Password","type":"string"}}},"RegisterUser_Out":{"title":"RegisterUser_Out","required":["id"],"type":"object","properties":{"id":{"title":" Id","type":"string","format":"uuid"}}},"UpdateUser_In":{"title":"UpdateUser_In","type":"object","properties":{"job_title":{"title":"Job Title","type":"string"},"roles":{"type":"array","items":{"$ref":"#/components/schemas/UserRole"}},"account_state":{"$ref":"#/components/schemas/UserAccountState"},"avatar":{"title":"Avatar","type":"string"}}},"UserAccountState":{"title":"UserAccountState","enum":["ACTIVE","INACTIVE","LOCKED"],"description":"An enumeration."},"UserInfo_Out":{"title":"UserInfo_Out","required":["name","email","job_title","roles","id"],"type":"object","properties":{"name":{"title":"Name","type":"string"},"email":{"title":"Email","type":"string","format":"email"},"job_title":{"title":"Job Title","type":"string"},"roles":{"type":"array","items":{"$ref":"#/components/schemas/UserRole"}},"avatar":{"title":"Avatar","type":"string"},"id":{"title":" Id","type":"string","format":"uuid"}}},"UserRole":{"title":"UserRole","enum":["SAIL_ADMIN","USER"],"description":"An enumeration."},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"anyOf":[{"type":"string"},{"type":"integer"}]}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}},"HTTPException":{"title":"HTTPExceptionObj","type":"object","properties":{"detail":{"title":"Error Detail","type":"string"}}}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"login"}}}}}}